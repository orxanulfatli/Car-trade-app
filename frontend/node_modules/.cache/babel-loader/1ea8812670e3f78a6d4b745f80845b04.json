{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { checkAuth, login, verify } from '../../services/authService';\nimport { AUTH_ACTION_CONSTANTS } from './action.constants';\nimport { loadState, saveState } from '../../utils/localStorage';\nimport { useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { useLayoutEffect } from 'react';\nexport const loginAC = email => async dispatch => {\n  try {\n    dispatch({\n      type: AUTH_ACTION_CONSTANTS.SET_LOADING,\n      payload: true\n    });\n    await login(email);\n    dispatch({\n      type: AUTH_ACTION_CONSTANTS.LOGIN,\n      payload: email\n    });\n  } catch (error) {\n    var _error$response, _error$response$data;\n\n    dispatch({\n      type: AUTH_ACTION_CONSTANTS.SET_API_ERROR,\n      payload: error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message\n    });\n  } finally {\n    dispatch({\n      type: AUTH_ACTION_CONSTANTS.SET_LOADING,\n      payload: false\n    });\n  }\n}; //i want use useNavigate in action creater\n//Hooks can only be called inside of the body of a function component.\n//Or, at the top level in the body of a custom Hook.\n//react component names must start with an uppercase letter.\n//react hook names must start with the word 'use'\n//that's why,i create custom hook for action creater ,\n//and names it start with 'use'\n\nexport const useVerify = () => {\n  _s();\n\n  const navigate = useNavigate();\n  return (email, otp, from) => async dispatch => {\n    try {\n      dispatch({\n        type: AUTH_ACTION_CONSTANTS.SET_LOADING,\n        payload: true\n      });\n      const response = await verify(email, otp);\n      saveState(\"token\", response.data.accessToken);\n      dispatch({\n        type: AUTH_ACTION_CONSTANTS.AUTH\n      });\n      navigate(from, {\n        replace: true\n      });\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n\n      dispatch({\n        type: AUTH_ACTION_CONSTANTS.SET_API_ERROR,\n        payload: error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message\n      });\n    } finally {\n      dispatch({\n        type: AUTH_ACTION_CONSTANTS.SET_LOADING,\n        payload: false\n      });\n    }\n  };\n};\n\n_s(useVerify, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n\nexport const checkAuthAC = () => async dispatch => {\n  try {\n    dispatch({\n      type: AUTH_ACTION_CONSTANTS.SET_LOADING,\n      payload: true\n    });\n    const response = await checkAuth();\n    saveState(\"token\", response.data.accessToken);\n    dispatch({\n      type: AUTH_ACTION_CONSTANTS.AUTH\n    });\n  } catch (error) {\n    var _error$response3, _error$response3$data;\n\n    dispatch({\n      type: AUTH_ACTION_CONSTANTS.SET_API_ERROR,\n      payload: error === null || error === void 0 ? void 0 : (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message\n    });\n  } finally {\n    dispatch({\n      type: AUTH_ACTION_CONSTANTS.SET_LOADING,\n      payload: false\n    });\n  }\n};","map":{"version":3,"names":["checkAuth","login","verify","AUTH_ACTION_CONSTANTS","loadState","saveState","useNavigate","useDispatch","useLayoutEffect","loginAC","email","dispatch","type","SET_LOADING","payload","LOGIN","error","SET_API_ERROR","response","data","message","useVerify","navigate","otp","from","accessToken","AUTH","replace","checkAuthAC"],"sources":["C:/Users/ASUS/Documents/Car-trade-app/frontend/src/Global/actions/authActions.js"],"sourcesContent":["import {checkAuth, login, verify} from '../../services/authService'\r\nimport { AUTH_ACTION_CONSTANTS } from './action.constants';\r\nimport { loadState, saveState } from '../../utils/localStorage';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useLayoutEffect } from 'react';\r\n\r\n\r\nexport const loginAC = (email) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: AUTH_ACTION_CONSTANTS.SET_LOADING, payload: true });\r\n    await login(email);\r\n    dispatch({ type: AUTH_ACTION_CONSTANTS.LOGIN, payload: email });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: AUTH_ACTION_CONSTANTS.SET_API_ERROR,\r\n      payload: error?.response?.data?.message,\r\n    });\r\n  } finally {\r\n    dispatch({ type: AUTH_ACTION_CONSTANTS.SET_LOADING, payload: false });\r\n  }\r\n};\r\n\r\n\r\n\r\n//i want use useNavigate in action creater\r\n//Hooks can only be called inside of the body of a function component.\r\n//Or, at the top level in the body of a custom Hook.\r\n//react component names must start with an uppercase letter.\r\n//react hook names must start with the word 'use'\r\n//that's why,i create custom hook for action creater ,\r\n//and names it start with 'use'\r\nexport const useVerify = () => {\r\n        const navigate = useNavigate();\r\n\r\n return (email, otp, from) => async (dispatch) => {\r\n   try {\r\n     dispatch({ type: AUTH_ACTION_CONSTANTS.SET_LOADING, payload: true });\r\n     const response = await verify(email, otp);\r\n     saveState(\"token\", response.data.accessToken);\r\n     dispatch({ type: AUTH_ACTION_CONSTANTS.AUTH });\r\n     navigate(from, { replace: true });\r\n   } catch (error) {\r\n     dispatch({\r\n       type: AUTH_ACTION_CONSTANTS.SET_API_ERROR,\r\n       payload: error?.response?.data?.message,\r\n     });\r\n   } finally {\r\n         dispatch({ type: AUTH_ACTION_CONSTANTS.SET_LOADING, payload: false });\r\n\r\n   }\r\n\r\n };\r\n}\r\n\r\nexport const checkAuthAC = () => \r\n  async (dispatch) => {\r\n    try {\r\n      dispatch({ type: AUTH_ACTION_CONSTANTS.SET_LOADING, payload: true });\r\n      const response = await checkAuth();\r\n      saveState(\"token\", response.data.accessToken);\r\n      dispatch({ type: AUTH_ACTION_CONSTANTS.AUTH });\r\n\r\n    } catch (error) {\r\n      dispatch({\r\n        type: AUTH_ACTION_CONSTANTS.SET_API_ERROR,\r\n        payload: error?.response?.data?.message,\r\n      });\r\n    }\r\n    finally {\r\n      dispatch({ type: AUTH_ACTION_CONSTANTS.SET_LOADING, payload: false })\r\n    }\r\n  }\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}