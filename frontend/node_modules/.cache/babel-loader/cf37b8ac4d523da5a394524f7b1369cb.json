{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Documents\\\\Car-trade-app\\\\frontend\\\\src\\\\Pages\\\\NewCar\\\\CarImage\\\\withImagePreview\\\\withImagePreview.js\";\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst withImagePreview = config => {\n  const {\n    control\n  } = config;\n  return (ImagePreview, ImageInput) => {\n    var _s = $RefreshSig$();\n\n    return _s(_ref => {\n      _s();\n\n      let {\n        backImage,\n        onHandleChange,\n        name,\n        file,\n        ...props\n      } = _ref;\n      // const [image, setImage] = useState(null);\n      const [fileDataURL, setFileDataURL] = useState(null);\n      const [fileDataURLS, setFIleDataURLS] = useState([]); // const onHandleChange = (e) => {\n      //   const file = e.target.files[0];\n      //   if (file.type.substr(0, 5) === \"image\") {\n      //     setImage(file);\n      //   } else {\n      //     setImage(null);\n      //   }\n      // };\n\n      const onHandleDelete = (e, ind) => {\n        e.preventDefault();\n\n        if (control) {\n          setFileDataURL(null);\n        } else {\n          setFIleDataURLS(prev => {\n            return prev.filter((value, index) => {\n              return index !== ind;\n            });\n          });\n        }\n      };\n\n      useEffect(() => {\n        let fileReader,\n            isCancel = false;\n\n        if (file) {\n          fileReader = new FileReader();\n\n          fileReader.onload = e => {\n            const {\n              result\n            } = e.target;\n\n            if (result && !isCancel) {\n              control ? setFileDataURL(result) : setFIleDataURLS(prev => [...prev, result]);\n            }\n          };\n\n          fileReader.readAsDataURL(file);\n        }\n\n        console.log(fileDataURLS);\n        return () => {\n          isCancel = true;\n\n          if (fileReader && fileReader.readyState === 1) {\n            fileReader.abort();\n          }\n        };\n      }, [file]); //   if (preview) { const mainImages = <></> }\n      //   else {const otherImages =<></>}\n\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: control ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: fileDataURL ? /*#__PURE__*/_jsxDEV(ImagePreview, {\n            fileDataURL: fileDataURL,\n            onHandleDelete: onHandleDelete,\n            ...props\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(ImageInput, {\n            backImage: backImage,\n            onHandleChange: onHandleChange,\n            name: name,\n            ...props\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 17\n          }, this)\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [fileDataURLS.length > 0 && fileDataURLS.map((value, index) => {\n            return /*#__PURE__*/_jsxDEV(ImagePreview, {\n              fileDataURL: value,\n              index: index,\n              onHandleDelete: onHandleDelete,\n              ...props\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 21\n            }, this);\n          }), /*#__PURE__*/_jsxDEV(ImageInput, {\n            backImage: backImage,\n            onHandleChange: onHandleChange,\n            name: name,\n            ...props\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false);\n    }, \"vDroCz4BSMgMB5yvGWhDmUE/lWk=\");\n  };\n};\n\nexport default withImagePreview;","map":{"version":3,"names":["useState","useEffect","withImagePreview","config","control","ImagePreview","ImageInput","backImage","onHandleChange","name","file","props","fileDataURL","setFileDataURL","fileDataURLS","setFIleDataURLS","onHandleDelete","e","ind","preventDefault","prev","filter","value","index","fileReader","isCancel","FileReader","onload","result","target","readAsDataURL","console","log","readyState","abort","length","map"],"sources":["C:/Users/ASUS/Documents/Car-trade-app/frontend/src/Pages/NewCar/CarImage/withImagePreview/withImagePreview.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nconst withImagePreview = (config) => {\r\n  const { control } = config;\r\n  return (ImagePreview, ImageInput) =>\r\n    ({ backImage, onHandleChange,name, file, ...props }) => {\r\n      // const [image, setImage] = useState(null);\r\n      const [fileDataURL, setFileDataURL] = useState(null);\r\n      const [fileDataURLS, setFIleDataURLS] = useState([]);\r\n      // const onHandleChange = (e) => {\r\n      //   const file = e.target.files[0];\r\n      //   if (file.type.substr(0, 5) === \"image\") {\r\n      //     setImage(file);\r\n      //   } else {\r\n      //     setImage(null);\r\n      //   }\r\n      // };\r\n\r\n      const onHandleDelete = (e, ind) => {\r\n        e.preventDefault();\r\n        if (control) {\r\n          setFileDataURL(null);\r\n        } else {\r\n          setFIleDataURLS((prev) => {\r\n            return prev.filter((value, index) => {\r\n              return index !== ind;\r\n            });\r\n          });\r\n          \r\n        }\r\n      };\r\n\r\n      useEffect(() => {\r\n        let fileReader,\r\n          isCancel = false;\r\n        if (file) {\r\n          fileReader = new FileReader();\r\n          fileReader.onload = (e) => {\r\n            const { result } = e.target;\r\n            if (result && !isCancel) {\r\n              control\r\n                ? setFileDataURL(result)\r\n                : setFIleDataURLS((prev) => [...prev, result]);\r\n            }\r\n          };\r\n          fileReader.readAsDataURL(file);\r\n        }\r\n        console.log(fileDataURLS);\r\n        return () => {\r\n          isCancel = true;\r\n          if (fileReader && fileReader.readyState === 1) {\r\n            fileReader.abort();\r\n          }\r\n        };\r\n      }, [file]);\r\n\r\n      //   if (preview) { const mainImages = <></> }\r\n      //   else {const otherImages =<></>}\r\n\r\n      return (\r\n        <>\r\n          {control ? (\r\n            <>\r\n              {fileDataURL ? (\r\n                <ImagePreview\r\n                  fileDataURL={fileDataURL}\r\n                  onHandleDelete={onHandleDelete}\r\n                  {...props}\r\n                />\r\n              ) : (\r\n                <ImageInput\r\n                  backImage={backImage}\r\n                  onHandleChange={onHandleChange}\r\n                  name={name}\r\n                  {...props}\r\n                />\r\n              )}\r\n            </>\r\n          ) : (\r\n            <>\r\n              {fileDataURLS.length > 0 &&\r\n                fileDataURLS.map((value, index) => {\r\n                  return (\r\n                    <ImagePreview\r\n                      key={index}\r\n                      fileDataURL={value}\r\n                      index={index}\r\n                      onHandleDelete={onHandleDelete}\r\n                      {...props}\r\n                    />\r\n                  );\r\n                })}\r\n              <ImageInput\r\n                backImage={backImage}\r\n                onHandleChange={onHandleChange}\r\n                name={name}\r\n                {...props}\r\n              />\r\n            </>\r\n          )}\r\n        </>\r\n      );\r\n    };\r\n};\r\n\r\nexport default withImagePreview;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}